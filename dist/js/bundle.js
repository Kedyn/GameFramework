!function t(e,n,o){function i(c,r){if(!n[c]){if(!e[c]){var a="function"==typeof require&&require;if(!r&&a)return a(c,!0);if(s)return s(c,!0);var h=new Error("Cannot find module '"+c+"'");throw h.code="MODULE_NOT_FOUND",h}var u=n[c]={exports:{}};e[c][0].call(u.exports,function(t){var n=e[c][1][t];return i(n?n:t)},u,u.exports,t,e,n,o)}return n[c].exports}for(var s="function"==typeof require&&require,c=0;c<o.length;c++)i(o[c]);return i}({1:[function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=t("./GameObject"),s=function(){function t(){}return t}();n.Drawing=s;var c=function(t){function e(e,n,o,i){t.call(this),this.object=e,this.color=n,this.fill=o,this.canvas_context=i}return o(e,t),e.prototype.draw=function(){this.fill?(this.canvas_context.fillStyle=this.color,this.canvas_context.fillRect(this.object.position.x,this.object.position.y,this.object.width,this.object.height)):(this.canvas_context.strokeStyle=this.color,this.canvas_context.lineWidth=1,this.canvas_context.strokeRect(this.object.position.x,this.object.position.y,this.object.width,this.object.height))},e}(s);n.RectangleDrawing=c;var r=function(t){function e(e,n,o,s){t.call(this),this.start_position=e,this.end_position=n,this.color=o,this.canvas_context=s,this.object=new i.PolyGameObject(e,[n])}return o(e,t),e.prototype.draw=function(){this.canvas_context.strokeStyle=this.color,this.canvas_context.moveTo(this.start_position.x,this.start_position.y),this.canvas_context.lineTo(this.end_position.x,this.end_position.y),this.canvas_context.lineWidth=1,this.canvas_context.stroke()},e}(s);n.LineDrawing=r;var a=function(t){function e(e,n,o,i,s,c,r){t.call(this),this.object=e,this.color=n,this.start_angle=o,this.end_angle=i,this.clockwise=s,this.fill=c,this.canvas_context=r}return o(e,t),e.prototype.draw=function(){this.canvas_context.beginPath(),this.canvas_context.arc(this.object.position.x,this.object.position.y,this.object.radius,this.start_angle,this.end_angle,this.clockwise),this.fill?(this.canvas_context.fillStyle=this.color,this.canvas_context.fill()):(this.canvas_context.strokeStyle=this.color,this.canvas_context.lineWidth=1,this.canvas_context.stroke())},e}(s);n.CircleDrawing=a;var h=function(t){function e(e,n,o,s,c,r,a,h){t.call(this),this.font_size=n,this.font_name=o,this.color=s,this.text=c,this.center=r,this.fill=a,this.canvas_context=h,h.save(),h.font=n+"px "+o;var u=h.measureText(c).width;this.object=new i.RectangularGameObject(e,u,n),h.restore()}return o(e,t),e.prototype.draw=function(){this.canvas_context.font=this.font_size+"px "+this.font_name,this.canvas_context.textAlign="left",this.center&&(this.canvas_context.textAlign="center"),this.fill?(this.canvas_context.fillStyle=this.color,this.canvas_context.fillText(this.text,this.object.position.x,this.object.position.y)):(this.canvas_context.strokeStyle=this.color,this.canvas_context.strokeText(this.text,this.object.position.x,this.object.position.y))},e}(s);n.TextDrawing=h;var u=function(t){function e(e,n,o,s,c,r){t.call(this),this.position=e,this.image=n,this.center=o,this.canvas_context=s,this.center&&(e.x-=n.width/2,e.y-=n.height/2),c&&r?(this.width=c,this.height=r):(this.width=n.width,this.height=n.height),this.object=new i.RectangularGameObject(e,c,r)}return o(e,t),e.prototype.draw=function(){this.canvas_context.drawImage(this.image,this.position.x,this.position.y,this.width,this.height)},e}(s);n.ImageDrawing=u},{"./GameObject":3}],2:[function(t,e,n){"use strict";var o=t("./InputHandler"),i=t("./GameSceneManager"),s=1e3,c=function(){function t(t,e){var n=this;this.game_id=t,this.canvas=e,this.animate=function(){var t=new Date,e=t.getTime()-n.last_time,o=s/n.frame_rate;e>o&&(n.scene_manager.update(),n.scene_manager.render(),n.last_time=t.getTime()-e%o),requestAnimationFrame(n.animate)},this.onKeyDown=function(t){n.scene_manager.onKeyDown(t)},this.onKeyUp=function(t){n.scene_manager.onKeyUp(t)},this.onMouseMove=function(t){n.scene_manager.onMouseMove(t)},this.onMouseDown=function(t,e){n.scene_manager.onMouseDown(t,e)},this.onMouseUp=function(t,e){n.scene_manager.onMouseUp(t,e)};var c={onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,onMouseMove:this.onMouseMove,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp};this.frame_rate=60;var r=new Date;this.frame_counter=0,this.last_time=r.getTime(),this.input_handler=new o.InputHandler(this.canvas,c),this.scene_manager=new i.GameSceneManager}return t.prototype.init=function(){requestAnimationFrame(this.animate)},t.prototype.frameRate=function(t){this.frame_rate=t},t.prototype.inputHandler=function(){return this.input_handler},t.prototype.isKeyDown=function(t){return this.input_handler.isKeyDown(t)},t.prototype.mousePos=function(){return this.input_handler.mousePos()},t.prototype.isMouseButtonDown=function(t){return this.input_handler.isMouseButtonDown(t)},t.prototype.pushScene=function(t){this.scene_manager.pushScene(t)},t.prototype.changeScene=function(t){this.scene_manager.changeScene(t)},t.prototype.popScene=function(){this.scene_manager.popScene()},t}();n.Game=c},{"./GameSceneManager":5,"./InputHandler":6}],3:[function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(){function t(t){this.position=t}return t}();n.AnyGameObject=i;var s=function(t){function e(e,n,o){t.call(this,e),this.position=e,this.width=n,this.height=o}return o(e,t),e}(i);n.RectangularGameObject=s;var c=function(t){function e(e,n){t.call(this,e),this.position=e,this.radius=n}return o(e,t),e}(i);n.CircularGameObject=c;var r=function(t){function e(e,n){t.call(this,e),this.initial_point=e,this.end_points=n,n.unshift(e)}return o(e,t),e}(i);n.PolyGameObject=r;var a=function(){function t(t){this.drawing=t}return t.prototype.update=function(){},t.prototype.render=function(){this.drawing.draw()},t.prototype.cooInObject=function(t){var e=this.drawing.object.position.x,n=this.drawing.object.position.y;if(this.drawing.object.width)return t.x>=e&&t.x<=e+this.drawing.object.width&&t.y>=n&&t.y<=n+this.drawing.object.height;if(this.drawing.object.radius)return Math.pow(this.drawing.object.radius,2)<=Math.pow(t.x-e,2)+Math.pow(t.y-n,2);if(this.drawing.object.end_points.length){e=t.x,n=t.y;for(var o=!1,i=0,s=this.drawing.object.end_points.length-1;i<this.drawing.object.end_points.length;s=i++){var c=this.drawing.object.end_points[i].x,r=this.drawing.object.end_points[i].y,a=this.drawing.object.end_points[s].x,h=this.drawing.object.end_points[s].y,u=r>n!=h>n&&e<(a-c)*(n-r)/(h-r)+c;u&&(o=!o)}return o}return!1},t}();n.GameObject=a},{}],4:[function(t,e,n){"use strict";var o=function(){function t(t){this.id=t,this.objects=[]}return t.prototype.update=function(){for(var t=0,e=this.objects;t<e.length;t++){var n=e[t];n.update()}},t.prototype.render=function(){for(var t=0,e=this.objects;t<e.length;t++){var n=e[t];n.render()}},t.prototype.onEnter=function(){return!0},t.prototype.onKeyDown=function(t){},t.prototype.onKeyUp=function(t){},t.prototype.onMouseMove=function(t){},t.prototype.onMouseDown=function(t,e){},t.prototype.onMouseUp=function(t,e){},t.prototype.onExit=function(){return!0},t}();n.GameScene=o},{}],5:[function(t,e,n){"use strict";var o=function(){function t(){this.scenes=[]}return t.prototype.pushScene=function(t){this.scenes.push(t)},t.prototype.changeScene=function(t){this.scenes.length?this.scenes[this.scenes.length-1].id!=t.id?(this.scenes.push(t),this.scenes[this.scenes.length-1].onExit()?this.scenes.splice(this.scenes.length-2,1):console.log("Error exiting scene "+this.scenes[this.scenes.length-1].id),this.scenes[this.scenes.length-1].onEnter()||console.log("Error while changing scene")):console.log("Cannot change to the same scene"):console.log("Cannot change scene when there are no current scenes")},t.prototype.popScene=function(){this.scenes.length>1&&this.scenes[this.scenes.length-1].onExit()&&this.scenes.pop()},t.prototype.currentScene=function(){return this.scenes[this.scenes.length-1]},t.prototype.update=function(){this.currentScene().update()},t.prototype.render=function(){this.currentScene().render()},t.prototype.onKeyDown=function(t){this.currentScene().onKeyDown(t)},t.prototype.onKeyUp=function(t){this.currentScene().onKeyUp(t)},t.prototype.onMouseMove=function(t){this.currentScene().onMouseMove(t)},t.prototype.onMouseDown=function(t,e){this.currentScene().onMouseDown(t,e)},t.prototype.onMouseUp=function(t,e){this.currentScene().onMouseUp(t,e)},t}();n.GameSceneManager=o},{}],6:[function(t,e,n){"use strict";var o=t("./Vector2D"),i=t("./KeyCode"),s=function(){function t(t,e){var n=this;this.canvas=t,this.callbacks=e,this.keys=[],this.mouse_buttons=[],this.onKeyDown=function(t){t.preventDefault(),n.keys[t.keyCode]=!0,n.callbacks.onKeyDown&&n.callbacks.onKeyDown(t.keyCode)},this.onKeyUp=function(t){n.keys[t.keyCode]=!1,n.callbacks.onKeyUp&&n.callbacks.onKeyUp(t.keyCode)},this.onMouseMove=function(t){var e=t.pageX,o=t.pageY;e-=n.canvas.offsetLeft,o-=n.canvas.offsetTop,n.mouse_pos.x=e,n.mouse_pos.y=o,n.callbacks.onMouseMove&&n.callbacks.onMouseMove(n.mouse_pos)},this.onMouseDown=function(t){n.mouse_buttons[t.button]=!0,n.callbacks.onMouseDown&&n.callbacks.onMouseDown(t.button,n.mouse_pos)},this.onMouseUp=function(t){n.mouse_buttons[t.button]=!1,n.callbacks.onMouseUp&&n.callbacks.onMouseUp(t.button,n.mouse_pos)},t.tabIndex=0,t.addEventListener("keydown",this.onKeyDown,!1),t.addEventListener("keyup",this.onKeyUp,!1),t.addEventListener("mousemove",this.onMouseMove,!1),t.addEventListener("mousedown",this.onMouseDown,!1),t.addEventListener("mouseup",this.onMouseUp,!1),t.onclick=function(t){return!1},t.oncontextmenu=function(t){return!1},t.onwheel=function(t){return!1},t.focus();for(var s in i.KEYCODE){var c=parseInt(s,10);isNaN(c)||(this.keys[c]=!1)}for(var r=0;r<10;r++)this.mouse_buttons[r]=!1;this.mouse_pos=new o.Vector2D(0,0)}return t.prototype.isKeyDown=function(t){return!!this.keys[t]&&this.keys[t]},t.prototype.mousePos=function(){return this.mouse_pos},t.prototype.isMouseButtonDown=function(t){return!!this.mouse_buttons[t]&&this.mouse_buttons[t]},t}();n.InputHandler=s},{"./KeyCode":7,"./Vector2D":8}],7:[function(t,e,n){"use strict";var o;!function(t){t[t.BACKSPACE=8]="BACKSPACE",t[t.TAB=9]="TAB",t[t.ENTER=13]="ENTER",t[t.SHIFT=16]="SHIFT",t[t.CTRL=17]="CTRL",t[t.ALT=18]="ALT",t[t.PAUSE=19]="PAUSE",t[t.CAPS_LOCK=20]="CAPS_LOCK",t[t.ESCAPE=27]="ESCAPE",t[t.SPACE=32]="SPACE",t[t.PAGE_UP=33]="PAGE_UP",t[t.PAGE_DOWN=34]="PAGE_DOWN",t[t.END=35]="END",t[t.HOME=36]="HOME",t[t.LEFT_ARROW=37]="LEFT_ARROW",t[t.UP_ARROW=38]="UP_ARROW",t[t.RIGHT_ARROW=39]="RIGHT_ARROW",t[t.DOWN_ARROW=40]="DOWN_ARROW",t[t.INSERT=45]="INSERT",t[t.DELETE=46]="DELETE",t[t.KEY_0=48]="KEY_0",t[t.KEY_1=49]="KEY_1",t[t.KEY_2=50]="KEY_2",t[t.KEY_3=51]="KEY_3",t[t.KEY_4=52]="KEY_4",t[t.KEY_5=53]="KEY_5",t[t.KEY_6=54]="KEY_6",t[t.KEY_7=55]="KEY_7",t[t.KEY_8=56]="KEY_8",t[t.KEY_9=57]="KEY_9",t[t.KEY_A=65]="KEY_A",t[t.KEY_B=66]="KEY_B",t[t.KEY_C=67]="KEY_C",t[t.KEY_D=68]="KEY_D",t[t.KEY_E=69]="KEY_E",t[t.KEY_F=70]="KEY_F",t[t.KEY_G=71]="KEY_G",t[t.KEY_H=72]="KEY_H",t[t.KEY_I=73]="KEY_I",t[t.KEY_J=74]="KEY_J",t[t.KEY_K=75]="KEY_K",t[t.KEY_L=76]="KEY_L",t[t.KEY_M=77]="KEY_M",t[t.KEY_N=78]="KEY_N",t[t.KEY_O=79]="KEY_O",t[t.KEY_P=80]="KEY_P",t[t.KEY_Q=81]="KEY_Q",t[t.KEY_R=82]="KEY_R",t[t.KEY_S=83]="KEY_S",t[t.KEY_T=84]="KEY_T",t[t.KEY_U=85]="KEY_U",t[t.KEY_V=86]="KEY_V",t[t.KEY_W=87]="KEY_W",t[t.KEY_X=88]="KEY_X",t[t.KEY_Y=89]="KEY_Y",t[t.KEY_Z=90]="KEY_Z",t[t.LEFT_META=91]="LEFT_META",t[t.RIGHT_META=92]="RIGHT_META",t[t.SELECT=93]="SELECT",t[t.NUMPAD_0=96]="NUMPAD_0",t[t.NUMPAD_1=97]="NUMPAD_1",t[t.NUMPAD_2=98]="NUMPAD_2",t[t.NUMPAD_3=99]="NUMPAD_3",t[t.NUMPAD_4=100]="NUMPAD_4",t[t.NUMPAD_5=101]="NUMPAD_5",t[t.NUMPAD_6=102]="NUMPAD_6",t[t.NUMPAD_7=103]="NUMPAD_7",t[t.NUMPAD_8=104]="NUMPAD_8",t[t.NUMPAD_9=105]="NUMPAD_9",t[t.MULTIPLY=106]="MULTIPLY",t[t.ADD=107]="ADD",t[t.SUBTRACT=109]="SUBTRACT",t[t.DECIMAL=110]="DECIMAL",t[t.DIVIDE=111]="DIVIDE",t[t.F1=112]="F1",t[t.F2=113]="F2",t[t.F3=114]="F3",t[t.F4=115]="F4",t[t.F5=116]="F5",t[t.F6=117]="F6",t[t.F7=118]="F7",t[t.F8=119]="F8",t[t.F9=120]="F9",t[t.F10=121]="F10",t[t.F11=122]="F11",t[t.F12=123]="F12",t[t.NUM_LOCK=144]="NUM_LOCK",t[t.SCROLL_LOCK=145]="SCROLL_LOCK",t[t.SEMICOLON=186]="SEMICOLON",t[t.EQUALS=187]="EQUALS",t[t.COMMA=188]="COMMA",t[t.DASH=189]="DASH",t[t.PERIOD=190]="PERIOD",t[t.FORWARD_SLASH=191]="FORWARD_SLASH",t[t.GRAVE_ACCENT=192]="GRAVE_ACCENT",t[t.OPEN_BRACKET=219]="OPEN_BRACKET",t[t.BACK_SLASH=220]="BACK_SLASH",t[t.CLOSE_BRACKET=221]="CLOSE_BRACKET",t[t.SINGLE_QUOTE=222]="SINGLE_QUOTE"}(o||(o={})),n.KEYCODE=o},{}],8:[function(t,e,n){"use strict";var o=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.isEqual=function(t){return this.x==t.x&&this.y==t.y},t.prototype.length=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},t.prototype.copy=function(t){this.x=t.x,this.y=t.y},t.prototype.add=function(t){this.x+=t.x,this.y+=t.y},t.prototype.subtract=function(t){this.x-=t.x,this.y-=t.y},t.prototype.multiply=function(t){this.x*=t,this.y*=t},t.prototype.divide=function(t){this.x/=t,this.y/=t},t.prototype.normalize=function(){var t=this.length();t>0&&this.divide(t)},t}();n.Vector2D=o},{}],9:[function(t,e,n){"use strict";var o=t("./framework/Game"),i=t("./test/TestScene");window.onload=function(){var t=document.getElementById("game"),e=new o.Game("Snake",t);e.pushScene(new i.TestScene(e)),e.init()}},{"./framework/Game":2,"./test/TestScene":10}],10:[function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=t("../framework/GameScene"),s=t("../framework/GameObject"),c=t("../framework/Vector2D"),r=t("../framework/Drawing"),a=function(t){function e(e){t.call(this,"test"),this.game=e;var n=e.canvas.getContext("2d"),o=new s.RectangularGameObject(new c.Vector2D(0,0),e.canvas.width,e.canvas.height),i=new r.RectangleDrawing(o,"black",(!0),n),a=new r.TextDrawing(new c.Vector2D(e.canvas.width/2,e.canvas.height/2),30,"impact","white","eSe Game Framework",(!0),(!0),n);this.objects.push(new s.GameObject(i)),this.objects.push(new s.GameObject(a))}return o(e,t),e}(i.GameScene);n.TestScene=a},{"../framework/Drawing":1,"../framework/GameObject":3,"../framework/GameScene":4,"../framework/Vector2D":8}]},{},[9]);
//# sourceMappingURL=bundle.js.map
